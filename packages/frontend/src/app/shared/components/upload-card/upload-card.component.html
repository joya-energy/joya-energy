<div class="upload-card" (click)="onCardClick()">
  <input
    id="upload-file-input"
    #fileInput
    type="file"
    (change)="onFileSelected($event)"
    [accept]="config.acceptedTypes"
    hidden
  >

  <ng-container *ngIf="!selectedFile; else fileSelected">
    <div class="upload-card-content">
      <div class="upload-card-icon">
        <ng-icon name="lucideUpload" size="24"></ng-icon>
      </div>
      <h2>{{ config.title }}</h2>
      <p>{{ config.subtitle }}</p>
      <small>{{ config.maxSizeText }}</small>
    </div>
  </ng-container>

  <ng-template #fileSelected>
    <div class="upload-card-content">
      <div class="upload-card-success">âœ”</div>
      <h2>{{ config.selectedFileText }}</h2>
      <p class="upload-card-filename">{{ selectedFile?.name }}</p>
      <button class="text-link" (click)="onChangeFileClick($event)">
        {{ config.changeFileText }}
      </button>
    </div>
  </ng-template>
</div>

<div class="upload-actions">
  <button
    class="action-button action-button--primary"
    (click)="onExtractClick()"
    [disabled]="isExtracting || !selectedFile"
  >
    <ng-container *ngIf="isExtracting; else extractLabel">
      <span class="button-loader"></span>
      <span class="button-text">Analyse en cours...</span>
    </ng-container>
    <ng-template #extractLabel>
      <span class="button-text">{{ config.extractButtonText }}</span>
      <ng-icon name="lucideArrowRight" size="18"></ng-icon>
    </ng-template>
  </button>

  <button class="action-button action-button--secondary" (click)="onManualEntryClick()">
    <ng-icon name="lucidePencil" size="18"></ng-icon>
    <span class="button-text">{{ config.manualEntryButtonText }}</span>
  </button>
</div>
